(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1576bc57","chunk-2d0e4545"],{"4b5c":function(e,t,i){},9080:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i("18df");class a{constructor(e,t,i=s["a"]()){this.type=e,this.text=t,this.uuid=i}}},a3fd:function(e,t,i){"use strict";i.r(t);var s=i("8336"),a=i("a523"),d=i("132d"),n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(a["a"],{staticClass:"videos-container"},[t("div",{staticClass:"card-list-container"},[t("CardList",{staticClass:"video-list",attrs:{cards:e.videoCards,query:e.searchQuery},on:{clicked:e.onClick}})],1),t("transition",{attrs:{name:"slide"}},[e.selectedVideo?t("div",{staticClass:"track-list-container"},[t("div",{staticClass:"video-info-container",on:{click:function(t){e.selectedVideo=null}}},[t("div",{staticClass:"video-info-background",style:{backgroundImage:"url("+e.selectedVideo.getThumbnailURL("hqdefault")+")"}}),t("div",{staticClass:"video-info-content"},[t("div",{staticClass:"video-info"},[t("h2",{staticClass:"video-info-title"},[e._v(" "+e._s(e.selectedVideo.title)+" ")]),t("h4",{staticClass:"video-info-channel"},[e._v(" "+e._s(e.selectedVideo.channel.name)+" ")])]),t("div",{staticClass:"btn-close-track-list"},[t(s["a"],{attrs:{dark:"",icon:""}},[t(d["a"],{attrs:{size:"40"}},[e._v("mdi-chevron-down")])],1)],1),t("div",{staticClass:"video-actions"},[t(s["a"],{attrs:{icon:"",dark:""},on:{click:function(t){return t.stopPropagation(),e.addTracksToQueue.apply(null,arguments)}}},[t(d["a"],[e._v("mdi-plus")])],1),t(s["a"],{attrs:{icon:"",dark:""},on:{click:function(t){return t.stopPropagation(),e.shuffleAndQueue.apply(null,arguments)}}},[t(d["a"],[e._v("mdi-shuffle-variant")])],1),t(s["a"],{attrs:{icon:"",dark:""},on:{click:function(t){return t.stopPropagation(),e.queueAndRepeat.apply(null,arguments)}}},[t(d["a"],[e._v("mdi-repeat")])],1)],1)])]),t("TrackList",{staticClass:"track-list scroll-thin",attrs:{tracks:e.getTracksByVideoId(e.selectedVideo.id),sort:!1,put:!1,pull:"clone",queueing:!0}})],1):e._e()])],1)},o=[],c=(i("d9e2"),i("2b0e")),l=i("2f62"),r=i("2d40"),u=i("18df"),h=i("a735"),v=i("9080"),f=c["a"].extend({name:"Videos",components:{CardList:()=>i.e("chunk-0aefeb34").then(i.bind(null,"c995e")),TrackList:()=>i.e("chunk-53d03750").then(i.bind(null,"a1a1"))},data(){return{library:h["a"],videos:[],videoCards:[],videoToTracks:new Map,selectedVideo:null}},async created(){const e=new Map(h["a"].tracks.map(e=>[e.video.id,e.video])),t=[...e.values()];this.videoToTracks=new Map(t.map(e=>[e.id,h["a"].tracks.filter(t=>t.video.id===e.id)])),await Promise.all(t.map(e=>e.fetchVideoInfo())),this.videos=t,this.videoCards=u["d"](this.videos,e=>e.publishedAt).reverse().map(e=>{const t=new Set;return h["a"].tracks.filter(t=>t.video.id===e.id).map(e=>{t.add(e.title),t.add(e.artist),t.add(e.singer),e.tags.map(e=>t.add(e))}),{id:e.id,title:e.getTitle()||"",subtitle:(e.getChannel()||{}).name||"",thumbnailUrl:e.getThumbnailURL("hqdefault"),metadata:[...t].join("  ")}})},computed:{...Object(l["d"])(["searchQuery"])},methods:{...Object(l["c"])({addToQueue:r["d"],setQueue:r["p"],setPlayingTrack:r["o"],setPlayerRepeat:r["m"],addMessage:r["b"]}),onClick(e){this.selectedVideo=this.videos.find(t=>t.id==e.id)||null},getTracksByVideoId(e){return h["a"].tracks.filter(t=>t.video.id===e)},addTracksToQueue(){if(!this.selectedVideo)throw Error("no video selected");const e=this.getTracksByVideoId(this.selectedVideo.id);e.map(e=>this.addToQueue(e.clone())),this.addMessage(new v["a"]("info",e.length+"曲をキューに追加しました"))},shuffleAndQueue(){if(!this.selectedVideo)throw Error("no video selected");const e=u["c"](this.getTracksByVideoId(this.selectedVideo.id));e.length>0&&(this.setPlayingTrack(e[0]),this.setQueue(e),this.addMessage(new v["a"]("info",e.length+"曲をキューにセットしました")))},queueAndRepeat(){if(!this.selectedVideo)throw Error("no video selected");const e=this.getTracksByVideoId(this.selectedVideo.id);e.length>0&&(this.setPlayingTrack(e[0]),this.setQueue(e),this.setPlayerRepeat("repeat"),this.addMessage(new v["a"]("info",e.length+"曲をキューにセットしました")))}}}),p=f,k=(i("b905"),i("2877")),g=Object(k["a"])(p,n,o,!1,null,"77ecdae2",null);t["default"]=g.exports},b905:function(e,t,i){"use strict";i("4b5c")}}]);
//# sourceMappingURL=chunk-1576bc57.e44075d6.js.map